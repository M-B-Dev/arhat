
WindowManager:
    id: window_manager
    Login:
        id: login
        name: 'login'
        manager: window_manager
    NewTask:
        name: 'new'
        manager: window_manager
        label_text: login.data
        task_text: login.tasks
        token: login.token
        ident: login.ident
    EditTask:
        name: "edit"
    Tasks:
        name: "tasks"
    EditProfile:
        name: "profile"


<Login>
    name: "login"
    username: username
    password: password
    
    GridLayout:
        cols: 1
        size: root.width, root.height

        GridLayout:
            cols: 2

            Label:
                text: "Username: "
            TextInput:
                id: username
                multiline: False
            
            Label:
                text: "Password: "
            TextInput:
                id: password
                multiline: False
                password: True
            
        Button:
            text: "Submit"
            on_release:
                app.root.current = "tasks" if root.pressed() else "login"
                root.manager.transition.direction = "left"

<NewTask>
    name: "new"
    task_description: task_description
    start_time: start_time
    end_time: end_time
    frequency: frequency
    end_date: end_date


    GridLayout:
        cols: 1
        size: root.width, root.height


        Label:
            text: "Welcome back " + root.label_text
            text: "Enter a new task below"

        GridLayout:
            cols: 2

            Label:
                text: "Task: "
            TextInput:
                id: task_description
                multiline: False
            
            Label:
                text: "Start time: "
            MDRaisedButton:
                id: start_time
                text: "Open time picker"
                on_release: root.show_time_picker()

            Label:
                text: "End Time: "
            MDRaisedButton:
                id: end_time
                text: "Open time picker"
                on_release: root.show_time_picker()

            Label:
                text: "How often would you like this task to repeat?"
            TextInput:
                id: frequency
                multiline: False

            Label:
                text: "Until when would you like this task to repeat?"
            MDRaisedButton:
                id: end_date
                on_release:
                    root.show_date_picker()


        Button:
            text: "Submit"
            on_release:
                root.pressed()
        GridLayout:
            cols: 3
            Button:
                text: "Edit Tasks"
                on_release:
                    app.root.current = 'edit'

            Button:
                text: "Tasks"
                on_release:
                    app.root.current = 'tasks'

            Button:
                text: "Edit Profile"
                on_release:
                    app.root.current = 'profile'


        Button:
            text: "Logout"
            on_release:
                app.root.current = 'login'
                root.manager.transition.direction = "right"
                
<EditTask>
    name: "edit"
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            Button:
                text: "New Task"
                on_release:
                    app.root.current = 'new'

            Button:
                text: "Tasks"
                on_release:
                    app.root.current = 'tasks'

            Button:
                text: "Edit Profile"
                on_release:
                    app.root.current = 'profile'
        Button:
            text: "Logout"
            on_release:
                app.root.current = 'login'
                root.manager.transition.direction = "right"

<Tasks>
    name: "tasks"
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            Button:
                text: "Edit Tasks"
                on_release:
                    app.root.current = 'edit'

            Button:
                text: "New Task"
                on_release:
                    app.root.current = 'new'

            Button:
                text: "Edit Profile"
                on_release:
                    app.root.current = 'profile'
        Button:
            text: "Logout"
            on_release:
                app.root.current = 'login'
                root.manager.transition.direction = "right"

<EditProfile>
    name: "profile"
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            Button:
                text: "Edit Tasks"
                on_release:
                    app.root.current = 'edit'

            Button:
                text: "Tasks"
                on_release:
                    app.root.current = 'tasks'

            Button:
                text: "New Task"
                on_release:
                    app.root.current = 'new'
        Button:
            text: "Logout"
            on_release:
                app.root.current = 'login'
                root.manager.transition.direction = "right"