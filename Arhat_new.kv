<ItemDrawer>:
    theme_text_color: "Custom"
    on_release: 
        self.parent.set_color_item(self)


    IconLeftWidget:
        id: icon
        icon: root.icon
        theme_text_color: "Custom"
        text_color: root.text_color


<ContentNavigationDrawer>:
    orientation: "vertical"
    padding: "8dp"
    spacing: "8dp"

    AnchorLayout:
        anchor_x: "left"
        size_hint_y: None
        height: avatar.height

        Image:
            id: avatar
            size_hint: None, None
            size: "56dp", "56dp"
            source: "app/static/images/logo.png"

    MDLabel:
        text: "Arhat"
        font_style: "Button"
        size_hint_y: None
        height: self.texture_size[1]


    ScrollView:

        MDList:

            OneLineListItem:
                text: "Login"
                on_press:
                    window_manager.current = "Login"

            OneLineListItem:
                text: "Register"
                on_press:
                    window_manager.current = "Register"

            


NavigationLayout:
    WindowManager:
        id: window_manager
        Login:
            id: Login
            name: 'Login'
            username: username
            password: password

            BoxLayout:
                orientation: "vertical"

                
                BoxLayout:
                    orientation: "vertical"
                    size_hint_y: None
                    height: self.minimum_height
                    padding: dp(48)
                    spacing: 10

                    MDTextField:
                        id: username
                        hint_text: "Username"
                        required: True
                        mode: "rectangle"
                        pos_hint: {"center_x": 0.5, "center_y": 0.7}

                    MDTextField:
                        id: password
                        hint_text: "Password"
                        required: True
                        mode: "rectangle"
                        password: True
                        pos_hint: {"center_x": 0.5, "center_y": 0.4}

                    MDRaisedButton:
                        text: "Login"
                        pos_hint: {"center_x": 0.5, "center_y": 0.1}
                        on_release: 
                            window_manager.current = 'Tasks' if Login.login_user() else 'Login'

                Widget:

        Tasks:
            id: Tasks
            name: 'Tasks'

            BoxLayout:
                orientation: "vertical"

                BoxLayout:
                    orientation: "vertical"
                    size_hint_y: None
                    height: self.minimum_height
                    padding: dp(48)
                    spacing: 10

                    MDRaisedButton:
                        text: "Logout"
                        pos_hint: {"center_x": 0.5, "center_y": 0.4}
                        on_release: 
                            window_manager.current = 'Login'
                            window_manager.transition.direction = "right"     
                Widget:
            
        Register:
            id: Register
            name: 'Register'
            rusername: rusername
            email: email
            password1: password1
            password2: password2

            BoxLayout:
                orientation: "vertical"

                MDToolbar:
                    id: toolbar
                    title: app.title
                    md_bg_color: app.theme_cls.primary_color
                    background_palette: "Primary"
                    elevation: 10
                    left_action_items: [['menu', lambda x: nav_drawer.toggle_nav_drawer()]]

                BoxLayout:
                    orientation: "vertical"
                    size_hint_y: None
                    height: self.minimum_height
                    padding: dp(48)
                    spacing: 10

                    MDTextField:
                        id: rusername
                        hint_text: "Username"
                        required: True
                        mode: "rectangle"
                        pos_hint: {"center_x": 0.5, "center_y": 0.9}

                    MDTextField:
                        id: email
                        hint_text: "Email"
                        required: True
                        mode: "rectangle"
                        pos_hint: {"center_x": 0.5, "center_y": 0.85}

                    MDTextField:
                        id: password1
                        hint_text: "Enter your password"
                        required: True
                        mode: "rectangle"
                        password: True
                        pos_hint: {"center_x": 0.5, "center_y": 0.7}

                    MDTextField:
                        id: password2
                        hint_text: "Re-enter your password"
                        required: True
                        mode: "rectangle"
                        password: True
                        pos_hint: {"center_x": 0.5, "center_y": 0.55}

                    MDRaisedButton:
                        text: "Register"
                        pos_hint: {"center_x": 0.5, "center_y": 0.4}
                        on_release: 
                            window_manager.current = 'Login'
                            window_manager.transition.direction = "right"
                Widget:

    MDNavigationDrawer:
        id: nav_drawer

        ContentNavigationDrawer:
            id: content_drawer
                